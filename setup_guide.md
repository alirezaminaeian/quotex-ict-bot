# راهنمای کامل راه‌اندازی ربات سیگنال ICT برای Quotex (فقط هشدار تلگرام)

این راهنما از صفر تا صد، قدم‌به‌قدم، بدون نیاز به دانش برنامه‌نویسی، شما را راه می‌اندازد.

---

## 1) نصب پیش‌نیازها (ویندوز)

1. نصب Python 3.12:
   - وارد سایت رسمی شوید و دانلود کنید: https://www.python.org/downloads/
   - موقع نصب حتما گزینه "Add Python to PATH" را تیک بزنید.
2. نصب VS Code:
   - دانلود: https://code.visualstudio.com/
3. پوشه پروژه را باز کنید:
   - پوشه `quotex_ict_bot` را در VS Code باز کنید.
4. ترمینال را باز کنید و کتابخانه‌ها را نصب کنید:

```bash
pip install -r requirements.txt
```

اگر خطا داشتید:
- از این دستور استفاده کنید:
```bash
python -m pip install --upgrade pip
pip install -r requirements.txt
```

---

## 2) ساخت فایل تنظیمات `.env`

یک فایل جدید به نام `.env` در پوشه `quotex_ict_bot` بسازید و این مقادیر را داخلش بگذارید:

```bash
QUOTEX_EMAIL=your_email@gmail.com
QUOTEX_PASSWORD=your_pass
TELEGRAM_TOKEN=12345:ABCDEF
TELEGRAM_CHAT_ID=123456789
HEADLESS=false
```

توضیح:
- QUOTEX_EMAIL و QUOTEX_PASSWORD: ایمیل و رمز عبور حساب Quotex شما
- TELEGRAM_TOKEN: از BotFather بگیرید (بخش بعدی)
- TELEGRAM_CHAT_ID: آی‌دی چت خودتان (یا گروه) که پیام برود
- HEADLESS=false: مرورگر قابل مشاهده باشد (برای ورود اولیه توصیه می‌شود)

نمونه آماده هم داخل فایل `env.example` هست؛ کافیست به `.env` تغییر نام بدهید و مقادیر را پر کنید.

---

## 3) ساخت ربات تلگرام (BotFather)

1. در تلگرام به BotFather پیام بدهید: `@BotFather`
2. دستور `/newbot` را بفرستید و اسم و یوزرنیم انتخاب کنید.
3. BotFather به شما `TELEGRAM_TOKEN` می‌دهد. آن را در `.env` بگذارید.
4. برای گرفتن `CHAT_ID` ساده‌ترین راه:
   - به ربات `@userinfobot` پیام بدهید و عدد `id` را بردارید.
   - یا یک پیام به ربات خود بفرستید، سپس از ابزارهای آنلاین "getUpdates" استفاده کنید.

---

## 4) اولین اجرا (ذخیره سشن Quotex)

1. ترمینال را داخل پوشه `quotex_ict_bot` باز کنید.
2. اجرا کنید:
```bash
python main.py
```
3. بار اول:
   - مرورگر کروم باز می‌شود.
   - ایمیل و رمز به‌صورت خودکار وارد می‌شود.
   - اگر کد تأیید ایمیل خواست، در ترمینال از شما می‌پرسد: «کد تأیید ایمیل رو وارد کن:»
   - کد را از ایمیل کپی کنید و در ترمینال بچسبانید و Enter بزنید.
4. بعد از ورود موفق:
   - ربات کوکی‌ها و localStorage را در `session/quotex_session.pkl` ذخیره می‌کند.
   - اجرای‌های بعدی دیگر نیاز به کد ندارید (ورود خودکار).

اگر ورود با خطا مواجه شد:
- اینترنت را چک کنید.
- ایمیل/رمز را درست بزنید.
- اگر 2FA فعال است، کد را دقیق وارد کنید.
- اگر باز هم نشد، `HEADLESS=false` باشد که مرورگر دیده شود و مشکل را ببینید.

---

## 5) تست تلگرام

برای تست سریع ارسال پیام:
- اجرا بگیرید و منتظر اولین سیگنال بمانید.
- یا موقتاً داخل کد تابع `send_telegram_signal` یک پیام تستی ارسال کنید و اجرا بگیرید.

اگر پیام نرسید:
- `TELEGRAM_TOKEN` و `CHAT_ID` را بررسی کنید.
- به رباتتان در تلگرام یک پیام "start/hi" بدهید تا فعال شود.

---

## 6) Kill Zone (ساعات فعالیت)

ربات فقط در این بازه‌ها اسکن می‌کند (ساعت تهران):
- 04:30 تا 07:30 (Asia OTC)
- 11:30 تا 14:30 (London OTC)
- 16:30 تا 19:30 (New York OTC)

خارج از این ساعات، هر 60 ثانیه صبر می‌کند و دوباره چک می‌کند.

---

## 7) منطق سیگنال ICT (خلاصه)

- Order Block (OB): کندل قوی قبل از برگشت (بدنه بزرگ، شدو کوچک)
- Fair Value Gap (FVG): فاصله بین High کندل 1 و Low کندل 3 (یا برعکس)
- Liquidity Sweep: قیمت از سقف/کف اخیر رد شود و برگردد
- Engulfing (M1): کندل فعلی کاملاً قبلی را بپوشاند
- Break of Structure (BOS): شکست سقف/کف سوئینگ قبلی
- امتیاز همگرایی:
  - OB + Sweep + Engulfing = 70%
  - + FVG = 80%
  - + BOS + Kill Zone = 85%+
- انقضای پیشفرض 1 دقیقه؛ 2 دقیقه فقط اگر شرایط قوی و بازه 17:00–19:00 تهران باشد.

فقط اگر امتیاز ≥85% بود، ربات «یک سیگنال قوی» بین همه جفت‌ها انتخاب و به تلگرام ارسال می‌کند.

---

## 8) اجرای بلندمدت (VPS/Task Scheduler)

- ویندوز (Task Scheduler):
  - یک "Basic Task" بسازید، تریگر روزانه، اکشن اجرای `python main.py` در مسیر پروژه.
- Oracle Cloud/سرور رایگان:
  - یک VM ویندوز یا لینوکس بسازید، Python و Google Chrome (و ChromeDriver) را نصب کنید، پروژه را کلون/آپلود کنید و با `screen` یا `tmux` یا سرویس systemd اجرا کنید.

نکته: برای اولین ورود بهتر است مرورگر غیر Headless باشد تا کد تأیید را وارد کنید؛ بعد از ذخیره سشن می‌توانید Headless را `true` کنید.

---

## 9) پوشه‌ها و فایل‌ها

```
quotex_ict_bot/
├── main.py
├── session/
│   └── quotex_session.pkl   (بعد از اولین ورود ساخته می‌شود)
├── .env                     (خودتان بسازید؛ نمونه env.example موجود است)
├── requirements.txt
├── setup_guide.md
└── logs/
    └── signals.log
```

---

## 10) عیب‌یابی سریع

- خطای Selenium/Driver:
  - `pip install -r requirements.txt` را دوباره اجرا کنید.
  - آخرین نسخه Google Chrome را نصب/آپدیت کنید.
- لاگین تکراری می‌خواهد:
  - فایل `session/quotex_session.pkl` را حذف کنید و بار اول از نو وارد شوید تا سشن تازه ذخیره شود.
- شناسایی OTC نشد:
  - احتمالاً طراحی UI تغییر کرده؛ لیست fallback استفاده می‌شود. بعداً می‌توانید Selectorها را مطابق UI جدید به‌روزرسانی کنید.
- کندل‌ها خالی برگشت:
  - برخی پلتفرم‌ها دیتا را روی Canvas نگه می‌دارند؛ کد تلاش می‌کند از اسکریپت‌های متداول دیتا بخواند. اگر خالی بود، منتظر آپدیت‌های بعدی باشید یا Selector/JS را سفارشی کنید.

---

همه چیز آماده است. اجرا بگیرید و منتظر سیگنال‌های قوی در Kill Zone باشید. موفق باشید!
